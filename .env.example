# 환경변수 설정 (.env)

이 파일은 프로젝트에서 사용하는 환경변수의 예시입니다.
실제 프로젝트 루트에 `.env` 파일을 생성하여 아래 변수를 설정하세요.

## 필수 환경변수

### Firebase 설정
```bash
# Firebase 프로젝트 설정
VITE_FIREBASE_API_KEY=your_firebase_api_key_here
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789012
VITE_FIREBASE_APP_ID=1:123456789012:web:abcdef123456

# Firebase Admin SDK (서버 사이드에서만 사용)
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com
FIREBASE_PROJECT_ID=your-project-id
```

### 애플리케이션 설정
```bash
# 앱 기본 설정
VITE_APP_NAME=도서관 예약 시스템
VITE_APP_VERSION=1.0.0
VITE_APP_ENV=development

# API 엔드포인트
VITE_API_BASE_URL=https://your-region-your-project.cloudfunctions.net
VITE_FIRESTORE_EMULATOR_HOST=localhost:8080
VITE_FUNCTIONS_EMULATOR_HOST=localhost:5001
```

### 외부 서비스 연동
```bash
# 이메일 서비스 (선택사항)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# 분석 서비스 (선택사항)
GOOGLE_ANALYTICS_ID=GA_MEASUREMENT_ID
MIXPANEL_TOKEN=your_mixpanel_token

# 고객 지원 (선택사항)
SUPPORT_EMAIL=support@library-system.com
SUPPORT_PHONE=02-123-4567
```

## 환경별 설정

### 개발 환경 (.env.development)
```bash
VITE_APP_ENV=development
VITE_API_BASE_URL=http://localhost:5001/your-project/us-central1
VITE_FIRESTORE_EMULATOR_HOST=localhost:8080
VITE_FUNCTIONS_EMULATOR_HOST=localhost:5001
VITE_DEBUG=true
```

### 프로덕션 환경 (.env.production)
```bash
VITE_APP_ENV=production
VITE_API_BASE_URL=https://us-central1-your-project.cloudfunctions.net
VITE_DEBUG=false
VITE_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
```

### 테스트 환경 (.env.test)
```bash
VITE_APP_ENV=test
VITE_API_BASE_URL=http://localhost:5001/your-project/us-central1
VITE_FIRESTORE_EMULATOR_HOST=localhost:8080
VITE_FUNCTIONS_EMULATOR_HOST=localhost:5001
```

## 보안 고려사항

### 민감한 정보 보호
- `.env` 파일을 `.gitignore`에 추가하여 Git에 커밋되지 않도록 함
- 실제 값은 Firebase Console이나 CI/CD 파이프라인에서 설정
- 팀원 간 공유 시 암호화된 채널 사용

### Firebase 보안 키
```bash
# .env 파일에서는 절대 실제 키를 커밋하지 마세요
# 대신 Firebase Console에서 직접 설정하거나
# CI/CD에서 환경변수로 주입하세요

# 잘못된 예시 (절대 이렇게 하지 마세요)
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC...\n-----END PRIVATE KEY-----\n"

# 올바른 예시
FIREBASE_PRIVATE_KEY=$FIREBASE_PRIVATE_KEY_FROM_CI
```

## 설정 방법

### 1. 환경변수 파일 생성
```bash
# 프로젝트 루트에서
cp .env.example .env
```

### 2. 실제 값 입력
`.env` 파일을 열어 실제 Firebase 프로젝트 정보를 입력하세요.

### 3. Firebase 프로젝트 설정 확인
```bash
# Firebase 프로젝트에서 설정 확인
firebase projects:list
firebase use your-project-id
```

### 4. 로컬 개발 시 에뮬레이터 설정
```bash
# Firebase 에뮬레이터 시작
firebase emulators:start

# 에뮬레이터 URL이 .env 파일의 설정과 일치하는지 확인
# VITE_FIRESTORE_EMULATOR_HOST=localhost:8080
# VITE_FUNCTIONS_EMULATOR_HOST=localhost:5001
```

## 문제 해결

### 환경변수가 적용되지 않는 경우
1. **파일명 확인**: `.env` 파일이 프로젝트 루트에 있는지 확인
2. **변수명 확인**: `VITE_` 접두사가 붙은 변수만 클라이언트에서 사용 가능
3. **재시작 필요**: 개발 서버 재시작
4. **캐시 클리어**: 브라우저 캐시 및 로컬 스토리지 클리어

### Firebase 연결 오류
1. **API 키 확인**: Firebase Console에서 API 키가 올바른지 확인
2. **도메인 설정**: Firebase Console > Authentication > Sign-in method > Authorized domains에 도메인 추가
3. **보안 규칙**: Firestore Security Rules가 올바르게 설정되었는지 확인

### 에뮬레이터 연결 오류
1. **포트 확인**: 에뮬레이터가 지정된 포트에서 실행 중인지 확인
2. **환경변수**: `VITE_FIRESTORE_EMULATOR_HOST`와 `VITE_FUNCTIONS_EMULATOR_HOST`가 올바른지 확인
3. **방화벽**: 로컬 방화벽이 에뮬레이터 포트를 차단하지 않는지 확인

## 추가 설정

### VS Code 설정
`.vscode/settings.json`에 다음 설정을 추가하여 환경변수 자동 완성 지원:
```json
{
  "emmet.includeLanguages": {
    "javascript": "javascriptreact",
    "typescript": "typescriptreact"
  },
  "files.associations": {
    ".env": "properties",
    ".env.*": "properties"
  }
}
```

### CI/CD 파이프라인 설정
GitHub Actions, Vercel, 또는 다른 CI/CD 도구에서 환경변수 설정:
```yaml
# GitHub Actions 예시
- name: Deploy to Vercel
  env:
    VITE_FIREBASE_API_KEY: ${{ secrets.FIREBASE_API_KEY }}
    VITE_FIREBASE_PROJECT_ID: ${{ secrets.FIREBASE_PROJECT_ID }}
  run: vercel --prod
```

---

**참고**: 이 파일은 예시일 뿐입니다. 실제 배포 시 보안을 위해 실제 값은 절대 커밋하지 마세요.